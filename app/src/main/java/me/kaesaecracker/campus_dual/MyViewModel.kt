package me.kaesaecracker.campus_dual

import android.arch.lifecycle.ViewModel
import android.arch.lifecycle.MutableLiveData
import android.arch.lifecycle.LiveData
import com.squareup.moshi.KotlinJsonAdapterFactory
import com.squareup.moshi.Moshi


class MyViewModel : ViewModel() {
    private var lessons: MutableLiveData<List<Lesson>>? = null

    fun getLessons(): LiveData<List<Lesson>> {
        if (lessons == null) {
            lessons = MutableLiveData<List<Lesson>>()
            loadLessons()
        }

        return lessons as LiveData<List<Lesson>>
    }

    fun refreshLessons() {
        loadLessons()
    }

    private fun loadLessons() {
        val jsonStr = """[{"title":"WIARB V-Technik","start":1515393900,"end":1515399300,"allDay":false,"description":"WIARB V-Technik","color":"0070a3","editable":false,"room":"1.202","sroom":"1.202","instructor":"Marlies Kr\u00f6nert","sinstructor":"Marlies Kr\u00f6nert","remarks":""},{"title":"WIARB V-Technik","start":1515401100,"end":1515406500,"allDay":false,"description":"WIARB V-Technik","color":"0070a3","editable":false,"room":"1.202","sroom":"1.202","instructor":"Marlies Kr\u00f6nert","sinstructor":"Marlies Kr\u00f6nert","remarks":""},{"title":"WIARB Englisch","start":1515408300,"end":1515413700,"allDay":false,"description":"WIARB Englisch","color":"0070a3","editable":false,"room":"2.K25","sroom":"2.K25","instructor":"Claudia Dorn","sinstructor":"Claudia Dorn","remarks":""},{"title":"WIARB Englisch","start":1515415500,"end":1515420900,"allDay":false,"description":"WIARB Englisch","color":"0070a3","editable":false,"room":"2.K25","sroom":"2.K25","instructor":"Claudia Dorn","sinstructor":"Claudia Dorn","remarks":""},{"title":"Ma. Algebra","start":1515480300,"end":1515485700,"allDay":false,"description":"Ma. Algebra","color":"0070a3","editable":false,"room":"2.K25","sroom":"2.K25","instructor":"Claude Joachim Hamann","sinstructor":"Claude Joachim Hamann","remarks":""},{"title":"Ma. Algebra","start":1515487500,"end":1515492900,"allDay":false,"description":"Ma. Algebra","color":"0070a3","editable":false,"room":"2.K25","sroom":"2.K25","instructor":"Claude Joachim Hamann","sinstructor":"Claude Joachim Hamann","remarks":""},{"title":"INGG Vorlesung","start":1515494700,"end":1515500100,"allDay":false,"description":"INGG Vorlesung","color":"0070a3","editable":false,"room":"3.204","sroom":"3.204","instructor":"Daniel Gembris","sinstructor":"Daniel Gembris","remarks":""},{"title":"Imp. P. ","start":1515501900,"end":1515507300,"allDay":false,"description":"Imp. P. ","color":"0070a3","editable":false,"room":"2.015","sroom":"2.015","instructor":"Andriy Luntovskyy","sinstructor":"Andriy Luntovskyy","remarks":""},{"title":"Imp. P. ","start":1515508200,"end":1515513600,"allDay":false,"description":"Imp. P. ","color":"0070a3","editable":false,"room":"2.015","sroom":"2.015","instructor":"Andriy Luntovskyy","sinstructor":"Andriy Luntovskyy","remarks":""},{"title":"TGI ","start":1515581100,"end":1515586500,"allDay":false,"description":"TGI ","color":"0070a3","editable":false,"room":"3.204","sroom":"3.204","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"TGI ","start":1515588300,"end":1515593700,"allDay":false,"description":"TGI ","color":"0070a3","editable":false,"room":"3.204","sroom":"3.204","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"Ma. Algebra","start":1515653100,"end":1515658500,"allDay":false,"description":"Ma. Algebra","color":"0070a3","editable":false,"room":"2.K25","sroom":"2.K25","instructor":"Claude Joachim Hamann","sinstructor":"Claude Joachim Hamann","remarks":""},{"title":"Ma. Algebra","start":1515660300,"end":1515665700,"allDay":false,"description":"Ma. Algebra","color":"0070a3","editable":false,"room":"2.K25","sroom":"2.K25","instructor":"Claude Joachim Hamann","sinstructor":"Claude Joachim Hamann","remarks":""},{"title":"INGG ","start":1515667500,"end":1515672900,"allDay":false,"description":"INGG ","color":"0070a3","editable":false,"room":"2.K25","sroom":"2.K25","instructor":"Daniel Gembris","sinstructor":"Daniel Gembris","remarks":""},{"title":"Imp. P. ","start":1515674700,"end":1515680100,"allDay":false,"description":"Imp. P. ","color":"0070a3","editable":false,"room":"2.015","sroom":"2.015","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"Imp. P. ","start":1515681000,"end":1515686400,"allDay":false,"description":"Imp. P. ","color":"0070a3","editable":false,"room":"2.015","sroom":"2.015","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"Ma. Analysis","start":1515739500,"end":1515744900,"allDay":false,"description":"Ma. Analysis","color":"0070a3","editable":false,"room":"2.K25","sroom":"2.K25","instructor":"Daniel Gembris","sinstructor":"Daniel Gembris","remarks":""},{"title":"Ma. Analysis","start":1515746700,"end":1515752100,"allDay":false,"description":"Ma. Analysis","color":"0070a3","editable":false,"room":"2.K25","sroom":"2.K25","instructor":"Daniel Gembris","sinstructor":"Daniel Gembris","remarks":""},{"title":"TGI ","start":1515753900,"end":1515759300,"allDay":false,"description":"TGI ","color":"0070a3","editable":false,"room":"3.204","sroom":"3.204","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"TGI ","start":1515761100,"end":1515766500,"allDay":false,"description":"TGI ","color":"0070a3","editable":false,"room":"3.204","sroom":"3.204","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"WIARB Englisch","start":1515998700,"end":1516004100,"allDay":false,"description":"WIARB Englisch","color":"0070a3","editable":false,"room":"2.K25","sroom":"2.K25","instructor":"Claudia Dorn","sinstructor":"Claudia Dorn","remarks":""},{"title":"WIARB Englisch","start":1516005900,"end":1516011300,"allDay":false,"description":"WIARB Englisch","color":"0070a3","editable":false,"room":"2.K25","sroom":"2.K25","instructor":"Claudia Dorn","sinstructor":"Claudia Dorn","remarks":""},{"title":"WIARB V-Technik","start":1516013100,"end":1516018500,"allDay":false,"description":"WIARB V-Technik","color":"0070a3","editable":false,"room":"1.202","sroom":"1.202","instructor":"Marlies Kr\u00f6nert","sinstructor":"Marlies Kr\u00f6nert","remarks":""},{"title":"WIARB V-Technik","start":1516020300,"end":1516025700,"allDay":false,"description":"WIARB V-Technik","color":"0070a3","editable":false,"room":"1.202","sroom":"1.202","instructor":"Marlies Kr\u00f6nert","sinstructor":"Marlies Kr\u00f6nert","remarks":""},{"title":"Ma. Analysis","start":1516085100,"end":1516090500,"allDay":false,"description":"Ma. Analysis","color":"0070a3","editable":false,"room":"2.K25","sroom":"2.K25","instructor":"Daniel Gembris","sinstructor":"Daniel Gembris","remarks":""},{"title":"Ma. Analysis","start":1516092300,"end":1516097700,"allDay":false,"description":"Ma. Analysis","color":"0070a3","editable":false,"room":"2.K25","sroom":"2.K25","instructor":"Daniel Gembris","sinstructor":"Daniel Gembris","remarks":""},{"title":"TGI ","start":1516099500,"end":1516104900,"allDay":false,"description":"TGI ","color":"0070a3","editable":false,"room":"3.204","sroom":"3.204","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"TGI ","start":1516106700,"end":1516112100,"allDay":false,"description":"TGI ","color":"0070a3","editable":false,"room":"3.204","sroom":"3.204","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"Imp. P. ","start":1516171500,"end":1516176900,"allDay":false,"description":"Imp. P. ","color":"0070a3","editable":false,"room":"2.119","sroom":"2.119","instructor":"Andriy Luntovskyy","sinstructor":"Andriy Luntovskyy","remarks":""},{"title":"Imp. P. ","start":1516178700,"end":1516184100,"allDay":false,"description":"Imp. P. ","color":"0070a3","editable":false,"room":"2.119","sroom":"2.119","instructor":"Andriy Luntovskyy","sinstructor":"Andriy Luntovskyy","remarks":""},{"title":"TGI ","start":1516185900,"end":1516191300,"allDay":false,"description":"TGI ","color":"0070a3","editable":false,"room":"2.119","sroom":"2.119","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"TGI ","start":1516193100,"end":1516198500,"allDay":false,"description":"TGI ","color":"0070a3","editable":false,"room":"2.119","sroom":"2.119","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"Ma. Algebra","start":1516257900,"end":1516263300,"allDay":false,"description":"Ma. Algebra","color":"0070a3","editable":false,"room":"2.K25","sroom":"2.K25","instructor":"Claude Joachim Hamann","sinstructor":"Claude Joachim Hamann","remarks":""},{"title":"Ma. Algebra","start":1516265100,"end":1516270500,"allDay":false,"description":"Ma. Algebra","color":"0070a3","editable":false,"room":"2.K25","sroom":"2.K25","instructor":"Claude Joachim Hamann","sinstructor":"Claude Joachim Hamann","remarks":""},{"title":"TGI ","start":1516272300,"end":1516277700,"allDay":false,"description":"TGI ","color":"0070a3","editable":false,"room":"3.204","sroom":"3.204","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"TGI ","start":1516279500,"end":1516284900,"allDay":false,"description":"TGI ","color":"0070a3","editable":false,"room":"3.204","sroom":"3.204","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"Ma. Algebra","start":1516344300,"end":1516349700,"allDay":false,"description":"Ma. Algebra","color":"0070a3","editable":false,"room":"2.K25","sroom":"2.K25","instructor":"Claude Joachim Hamann","sinstructor":"Claude Joachim Hamann","remarks":""},{"title":"Ma. Algebra","start":1516351500,"end":1516356900,"allDay":false,"description":"Ma. Algebra","color":"0070a3","editable":false,"room":"2.K25","sroom":"2.K25","instructor":"Claude Joachim Hamann","sinstructor":"Claude Joachim Hamann","remarks":""},{"title":"TGI ","start":1516358700,"end":1516364100,"allDay":false,"description":"TGI ","color":"0070a3","editable":false,"room":"2.118","sroom":"2.118","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"TGI ","start":1516365900,"end":1516371300,"allDay":false,"description":"TGI ","color":"0070a3","editable":false,"room":"2.118","sroom":"2.118","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"INGG Vorlesung","start":1516610700,"end":1516616100,"allDay":false,"description":"INGG Vorlesung","color":"0070a3","editable":false,"room":"3.204","sroom":"3.204","instructor":"Daniel Gembris","sinstructor":"Daniel Gembris","remarks":""},{"title":"TGI ","start":1516617900,"end":1516623300,"allDay":false,"description":"TGI ","color":"0070a3","editable":false,"room":"3.204","sroom":"3.204","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"TGI ","start":1516625100,"end":1516630500,"allDay":false,"description":"TGI ","color":"0070a3","editable":false,"room":"3.204","sroom":"3.204","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"INGG ","start":1516689900,"end":1516695300,"allDay":false,"description":"INGG ","color":"0070a3","editable":false,"room":"3.104","sroom":"3.104","instructor":"Daniel Gembris","sinstructor":"Daniel Gembris","remarks":""},{"title":"INGG ","start":1516697100,"end":1516702500,"allDay":false,"description":"INGG ","color":"0070a3","editable":false,"room":"3.104","sroom":"3.104","instructor":"Daniel Gembris","sinstructor":"Daniel Gembris","remarks":""},{"title":"Ma. Algebra","start":1516704300,"end":1516709700,"allDay":false,"description":"Ma. Algebra","color":"0070a3","editable":false,"room":"1.202","sroom":"1.202","instructor":"Claude Joachim Hamann","sinstructor":"Claude Joachim Hamann","remarks":""},{"title":"Ma. Algebra","start":1516711500,"end":1516716900,"allDay":false,"description":"Ma. Algebra","color":"0070a3","editable":false,"room":"1.202","sroom":"1.202","instructor":"Claude Joachim Hamann","sinstructor":"Claude Joachim Hamann","remarks":""},{"title":"Ma. Analysis","start":1516783500,"end":1516788900,"allDay":false,"description":"Ma. Analysis","color":"0070a3","editable":false,"room":"3.204","sroom":"3.204","instructor":"Daniel Gembris","sinstructor":"Daniel Gembris","remarks":""},{"title":"TGI ","start":1516790700,"end":1516796100,"allDay":false,"description":"TGI ","color":"0070a3","editable":false,"room":"3.204","sroom":"3.204","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"TGI ","start":1516797900,"end":1516803300,"allDay":false,"description":"TGI ","color":"0070a3","editable":false,"room":"3.204","sroom":"3.204","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"Ma. Analysis","start":1516862700,"end":1516868100,"allDay":false,"description":"Ma. Analysis","color":"0070a3","editable":false,"room":"3.104","sroom":"3.104","instructor":"Daniel Gembris","sinstructor":"Daniel Gembris","remarks":""},{"title":"INGG ","start":1516869900,"end":1516875300,"allDay":false,"description":"INGG ","color":"0070a3","editable":false,"room":"3.104","sroom":"3.104","instructor":"Daniel Gembris","sinstructor":"Daniel Gembris","remarks":""},{"title":"Ma. Algebra","start":1516877100,"end":1516882500,"allDay":false,"description":"Ma. Algebra","color":"0070a3","editable":false,"room":"1.202","sroom":"1.202","instructor":"Claude Joachim Hamann","sinstructor":"Claude Joachim Hamann","remarks":""},{"title":"Ma. Algebra","start":1516884300,"end":1516889700,"allDay":false,"description":"Ma. Algebra","color":"0070a3","editable":false,"room":"1.202","sroom":"1.202","instructor":"Claude Joachim Hamann","sinstructor":"Claude Joachim Hamann","remarks":""},{"title":"TGI ","start":1516949100,"end":1516954500,"allDay":false,"description":"TGI ","color":"0070a3","editable":false,"room":"2.118","sroom":"2.118","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"TGI ","start":1516956300,"end":1516961700,"allDay":false,"description":"TGI ","color":"0070a3","editable":false,"room":"2.118","sroom":"2.118","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"Imp. P. ","start":1516963500,"end":1516968900,"allDay":false,"description":"Imp. P. ","color":"0070a3","editable":false,"room":"2.015","sroom":"2.015","instructor":"Andriy Luntovskyy","sinstructor":"Andriy Luntovskyy","remarks":""},{"title":"Imp. P. ","start":1516970700,"end":1516976100,"allDay":false,"description":"Imp. P. ","color":"0070a3","editable":false,"room":"2.015","sroom":"2.015","instructor":"Andriy Luntovskyy","sinstructor":"Andriy Luntovskyy","remarks":""},{"title":"WIARB V-Technik","start":1517208300,"end":1517213700,"allDay":false,"description":"WIARB V-Technik","color":"0070a3","editable":false,"room":"1.202","sroom":"1.202","instructor":"Marlies Kr\u00f6nert","sinstructor":"Marlies Kr\u00f6nert","remarks":""},{"title":"WIARB V-Technik","start":1517215500,"end":1517220900,"allDay":false,"description":"WIARB V-Technik","color":"0070a3","editable":false,"room":"1.202","sroom":"1.202","instructor":"Marlies Kr\u00f6nert","sinstructor":"Marlies Kr\u00f6nert","remarks":""},{"title":"WIARB Englisch","start":1517222700,"end":1517228100,"allDay":false,"description":"WIARB Englisch","color":"0070a3","editable":false,"room":"2.K25","sroom":"2.K25","instructor":"Claudia Dorn","sinstructor":"Claudia Dorn","remarks":""},{"title":"WIARB Englisch","start":1517229900,"end":1517235300,"allDay":false,"description":"WIARB Englisch","color":"0070a3","editable":false,"room":"2.K25","sroom":"2.K25","instructor":"Claudia Dorn","sinstructor":"Claudia Dorn","remarks":""},{"title":"INGG Vorlesung","start":1517236200,"end":1517241600,"allDay":false,"description":"INGG Vorlesung","color":"0070a3","editable":false,"room":"3.204","sroom":"3.204","instructor":"Daniel Gembris","sinstructor":"Daniel Gembris","remarks":""},{"title":"INGG ","start":1517301900,"end":1517307300,"allDay":false,"description":"INGG ","color":"0070a3","editable":false,"room":"3.204","sroom":"3.204","instructor":"Daniel Gembris","sinstructor":"Daniel Gembris","remarks":""},{"title":"TGI ","start":1517309100,"end":1517314500,"allDay":false,"description":"TGI ","color":"0070a3","editable":false,"room":"3.204","sroom":"3.204","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"TGI ","start":1517316300,"end":1517321700,"allDay":false,"description":"TGI ","color":"0070a3","editable":false,"room":"3.204","sroom":"3.204","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"TGI ","start":1517381100,"end":1517386500,"allDay":false,"description":"TGI ","color":"0070a3","editable":false,"room":"2.118","sroom":"2.118","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"TGI ","start":1517388300,"end":1517393700,"allDay":false,"description":"TGI ","color":"0070a3","editable":false,"room":"2.118","sroom":"2.118","instructor":"Eberhard Engelhardt","sinstructor":"Eberhard Engelhardt","remarks":""},{"title":"Imp. P. ","start":1517395500,"end":1517400900,"allDay":false,"description":"Imp. P. ","color":"0070a3","editable":false,"room":"2.015","sroom":"2.015","instructor":"Andriy Luntovskyy","sinstructor":"Andriy Luntovskyy","remarks":""},{"title":"Imp. P. ","start":1517402700,"end":1517408100,"allDay":false,"description":"Imp. P. ","color":"0070a3","editable":false,"room":"2.015","sroom":"2.015","instructor":"Andriy Luntovskyy","sinstructor":"Andriy Luntovskyy","remarks":""},{"title":"Ma. Analysis","start":1517467500,"end":1517472900,"allDay":false,"description":"Ma. Analysis","color":"0070a3","editable":false,"room":"3.204","sroom":"3.204","instructor":"Daniel Gembris","sinstructor":"Daniel Gembris","remarks":""},{"title":"Ma. Analysis","start":1517474700,"end":1517480100,"allDay":false,"description":"Ma. Analysis","color":"0070a3","editable":false,"room":"3.204","sroom":"3.204","instructor":"Daniel Gembris","sinstructor":"Daniel Gembris","remarks":""},{"title":"INGG Gr. 1","start":1517481900,"end":1517487300,"allDay":false,"description":"INGG Gr. 1","color":"0070a3","editable":false,"room":"2.309","sroom":"2.309","instructor":"Olaf Mann","sinstructor":"Olaf Mann","remarks":""},{"title":"INGG Gr. 1","start":1517489100,"end":1517494500,"allDay":false,"description":"INGG Gr. 1","color":"0070a3","editable":false,"room":"2.309","sroom":"2.309","instructor":"Olaf Mann","sinstructor":"Olaf Mann","remarks":""},{"title":"Ma. Algebra","start":1517553900,"end":1517559300,"allDay":false,"description":"Ma. Algebra","color":"0070a3","editable":false,"room":"3.204","sroom":"3.204","instructor":"Claude Joachim Hamann","sinstructor":"Claude Joachim Hamann","remarks":""},{"title":"Ma. Algebra","start":1517561100,"end":1517566500,"allDay":false,"description":"Ma. Algebra","color":"0070a3","editable":false,"room":"3.204","sroom":"3.204","instructor":"Claude Joachim Hamann","sinstructor":"Claude Joachim Hamann","remarks":""},{"title":"INGG ","start":1517568300,"end":1517573700,"allDay":false,"description":"INGG ","color":"0070a3","editable":false,"room":"1.202","sroom":"1.202","instructor":"Daniel Gembris","sinstructor":"Daniel Gembris","remarks":""},{"title":"INGG ","start":1517575500,"end":1517580900,"allDay":false,"description":"INGG ","color":"0070a3","editable":false,"room":"1.202","sroom":"1.202","instructor":"Daniel Gembris","sinstructor":"Daniel Gembris","remarks":""}]"""

        val moshi = Moshi.Builder()
                .add(KotlinJsonAdapterFactory())
                .build()
        val lessonAdapter = moshi.adapter<Array<Lesson>>(Array<Lesson>::class.java)
        val lessonArray = lessonAdapter.fromJson(jsonStr)

        lessons!!.value = lessonArray!!.toList()
    }

}